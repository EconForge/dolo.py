

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Dolo Model Classification &mdash; dolo 0.4.9.5 documentation</title>
  

  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  

  

  
    <link rel="top" title="dolo 0.4.9.5 documentation" href="index.html"/>
        <link rel="next" title="Solution algorithms" href="algos.html"/>
        <link rel="prev" title="Model API" href="model_api.html"/> 

  
  <script src="_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="index.html" class="icon icon-home"> dolo
          

          
          </a>

          
            
            
              <div class="version">
                0.4.9.5
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="installation.html">Getting started</a></li>
<li class="toctree-l1"><a class="reference internal" href="modeling_language.html">The dolo language</a></li>
<li class="toctree-l1"><a class="reference internal" href="model_api.html">Model API</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Dolo Model Classification</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#discrete-time-continuous-states-continuous-controls-models-dtcscc">Discrete Time - Continuous States - Continuous Controls models (DTCSCC)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#state-space">State-space</a></li>
<li class="toctree-l3"><a class="reference internal" href="#valid-equations">Valid equations</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#transitions">Transitions</a></li>
<li class="toctree-l4"><a class="reference internal" href="#auxiliary-variables">Auxiliary variables</a></li>
<li class="toctree-l4"><a class="reference internal" href="#utility-function-and-bellman-equation">Utility function and Bellman equation</a></li>
<li class="toctree-l4"><a class="reference internal" href="#value">Value</a></li>
<li class="toctree-l4"><a class="reference internal" href="#boundaries">Boundaries</a></li>
<li class="toctree-l4"><a class="reference internal" href="#euler-equation">Euler equation</a></li>
<li class="toctree-l4"><a class="reference internal" href="#expectations">Expectations</a></li>
<li class="toctree-l4"><a class="reference internal" href="#generalized-expectations">Generalized expectations</a></li>
<li class="toctree-l4"><a class="reference internal" href="#euler-equation-with-expectations">Euler equation with expectations</a></li>
<li class="toctree-l4"><a class="reference internal" href="#direct-response-function">Direct response function</a></li>
<li class="toctree-l4"><a class="reference internal" href="#terminal-conditions">Terminal conditions</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id1">Terminal conditions</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="algos.html">Solution algorithms</a></li>
<li class="toctree-l1"><a class="reference internal" href="examples.html">Examples</a></li>
<li class="toctree-l1"><a class="reference internal" href="faq.html">Frequently Asked Questions</a></li>
<li class="toctree-l1"><a class="reference internal" href="misc.html">Miscellaneous topics</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="index.html">dolo</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          

 



<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="index.html">Docs</a> &raquo;</li>
      
    <li>Dolo Model Classification</li>
      <li class="wy-breadcrumbs-aside">
        
          
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="dolo-model-classification">
<h1>Dolo Model Classification<a class="headerlink" href="#dolo-model-classification" title="Permalink to this headline">¶</a></h1>
<p>Dolo differentiates several types of models. Which type of model is more relevant depends on the particular problem under consideration. A model with a large number of equations, or whose behaviour consists in small fluctations around the steady-state is easier to analyse using Dynare conventions that don&#8217;t make an explicit distinction between variables.</p>
<p>By contrast, nonlinear or nondifferentiable global analysis, is made computationally tractable by separating symbols of diffent kinds (states, controls, values, ...) and by distinguishing between several types of equations (Bellman equations, Euler equations, ...). Each of these equations (aka <code class="docutils literal"><span class="pre">feature</span></code> of the model), must satisfy a precise definition. Each symbol type is characterized by a 1-character short name and a full name. For instances symbol types <code class="docutils literal"><span class="pre">states</span></code>, <code class="docutils literal"><span class="pre">controls</span></code> and <code class="docutils literal"><span class="pre">shocks</span></code> are consistently abbreviated by <code class="docutils literal"><span class="pre">s</span></code> and <code class="docutils literal"><span class="pre">x</span></code> respectively.</p>
<p>Appart from the distinction between Dynare models and nonlocal models, Dolo also treats differently global models where all states evolve continuously (DTCSCC) and models where some of the models evolve according to a discrete Markov chain (DTMSCC).</p>
<p>The purpose of this chapter is to define unambiguously these definitions. The solution method available for each of the features set will be detailed in the next chapter.</p>
<div class="section" id="discrete-time-continuous-states-continuous-controls-models-dtcscc">
<h2>Discrete Time - Continuous States - Continuous Controls models (DTCSCC)<a class="headerlink" href="#discrete-time-continuous-states-continuous-controls-models-dtcscc" title="Permalink to this headline">¶</a></h2>
<p>The following types of variables can be used in DTCSCC models:</p>
<blockquote>
<div><ul class="simple">
<li><code class="docutils literal"><span class="pre">states</span></code> (<code class="docutils literal"><span class="pre">s</span></code>)</li>
<li><code class="docutils literal"><span class="pre">controls</span></code> (<code class="docutils literal"><span class="pre">x</span></code>)</li>
<li><code class="docutils literal"><span class="pre">shocks</span></code> (<code class="docutils literal"><span class="pre">e</span></code>)</li>
<li><code class="docutils literal"><span class="pre">auxiliaries</span></code> (<code class="docutils literal"><span class="pre">y</span></code>)</li>
<li><code class="docutils literal"><span class="pre">rewards</span></code> (<code class="docutils literal"><span class="pre">r</span></code>)</li>
<li><code class="docutils literal"><span class="pre">values</span></code> (<code class="docutils literal"><span class="pre">v</span></code>)</li>
<li><code class="docutils literal"><span class="pre">expectations</span></code> (<code class="docutils literal"><span class="pre">z</span></code>)</li>
<li><code class="docutils literal"><span class="pre">parameters</span></code> (<code class="docutils literal"><span class="pre">p</span></code>)</li>
</ul>
</div></blockquote>
<p>Symbol types that are present in a model are always listed in that order.</p>
<div class="section" id="state-space">
<h3>State-space<a class="headerlink" href="#state-space" title="Permalink to this headline">¶</a></h3>
<p>Decisions are characterized by a vector <span class="math">\(s\)</span> of continuous variables, referred to as the states. The unknown vector of controls <span class="math">\(x\)</span> is a function <span class="math">\(\varphi\)</span> of the states
such that:</p>
<div class="math">
\[x = \varphi(s)\]</div>
<p>The function <span class="math">\(\varphi\)</span> is typically approximated by the solution algorithm. It can be either a Taylor expansion, or an intepolating object (splines, smolyak). In both cases, it behaves like a numpy gufunc and can be called on a vector or a list of points:</p>
<div class="code python highlight-python3"><div class="highlight"><pre><span></span><span class="n">dr</span> <span class="o">=</span> <span class="n">approximate_controls</span><span class="p">(</span><span class="n">model</span><span class="p">)</span>
<span class="n">s0</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">calibration</span><span class="p">[</span><span class="s1">&#39;states&#39;</span><span class="p">]</span>
<span class="n">dr</span><span class="p">(</span><span class="n">s0</span><span class="p">)</span>                               <span class="c1"># evaluates on a vector</span>
<span class="n">dr</span><span class="p">(</span><span class="n">s0</span><span class="p">[</span><span class="kc">None</span><span class="p">,:]</span><span class="o">.</span><span class="n">repeat</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span> <span class="p">)</span>   <span class="c1"># works on a list of points too</span>
</pre></div>
</div>
</div>
<div class="section" id="valid-equations">
<h3>Valid equations<a class="headerlink" href="#valid-equations" title="Permalink to this headline">¶</a></h3>
<p>The various equations that can be defined using these symbol types is summarized in the following table. They are also reviewed below with more details.</p>
<table border="1" class="docutils">
<colgroup>
<col width="28%" />
<col width="25%" />
<col width="10%" />
<col width="38%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td>Function</td>
<td>Standard name</td>
<td>Short name</td>
<td>Definition</td>
</tr>
<tr class="row-even"><td>Transitions</td>
<td><code class="docutils literal"><span class="pre">transition</span></code></td>
<td><code class="docutils literal"><span class="pre">g</span></code></td>
<td><code class="docutils literal"><span class="pre">s</span> <span class="pre">=</span> <span class="pre">g(s(-1),x(-1),e)</span></code></td>
</tr>
<tr class="row-odd"><td>Lower bound</td>
<td><code class="docutils literal"><span class="pre">controls_lb</span></code></td>
<td><code class="docutils literal"><span class="pre">lb</span></code></td>
<td><code class="docutils literal"><span class="pre">x_lb</span> <span class="pre">=</span> <span class="pre">lb(s)</span></code></td>
</tr>
<tr class="row-even"><td>Upper bound</td>
<td><code class="docutils literal"><span class="pre">controls_ub</span></code></td>
<td><code class="docutils literal"><span class="pre">ub</span></code></td>
<td><code class="docutils literal"><span class="pre">x_ub</span> <span class="pre">=</span> <span class="pre">ub(s)</span></code></td>
</tr>
<tr class="row-odd"><td>Auxiliary</td>
<td><code class="docutils literal"><span class="pre">auxiliary</span></code></td>
<td><code class="docutils literal"><span class="pre">a</span></code></td>
<td><code class="docutils literal"><span class="pre">y</span> <span class="pre">=</span> <span class="pre">a(s,x)</span></code></td>
</tr>
<tr class="row-even"><td>Utility</td>
<td><code class="docutils literal"><span class="pre">utility</span></code></td>
<td><code class="docutils literal"><span class="pre">u</span></code></td>
<td><code class="docutils literal"><span class="pre">r</span> <span class="pre">=</span> <span class="pre">u(s,x)</span></code></td>
</tr>
<tr class="row-odd"><td>Value updating</td>
<td><code class="docutils literal"><span class="pre">value_updating</span></code></td>
<td><code class="docutils literal"><span class="pre">w</span></code></td>
<td><code class="docutils literal"><span class="pre">v</span> <span class="pre">=</span> <span class="pre">w(s,x,v,s(1),x(1),w(1))</span></code></td>
</tr>
<tr class="row-even"><td>Arbitrage</td>
<td><code class="docutils literal"><span class="pre">arbitrage</span></code></td>
<td><code class="docutils literal"><span class="pre">f</span></code></td>
<td><code class="docutils literal"><span class="pre">0=f(s,x,e(1),s(1),x(1)</span></code></td>
</tr>
<tr class="row-odd"><td>Expectations</td>
<td><code class="docutils literal"><span class="pre">expectation</span></code></td>
<td><code class="docutils literal"><span class="pre">h</span></code></td>
<td><code class="docutils literal"><span class="pre">z=h(s(1),x(1))</span></code></td>
</tr>
<tr class="row-even"><td>Generalized expectations</td>
<td><code class="docutils literal"><span class="pre">expectation_2</span></code></td>
<td><code class="docutils literal"><span class="pre">h_2</span></code></td>
<td><code class="docutils literal"><span class="pre">z=h_2(s,x,e(1),s(1),x(1))</span></code></td>
</tr>
<tr class="row-odd"><td>Arbitrage (explicit expectations)</td>
<td><code class="docutils literal"><span class="pre">arbitrage_2</span></code></td>
<td><code class="docutils literal"><span class="pre">f_2</span></code></td>
<td><code class="docutils literal"><span class="pre">0=f_2(s,x,z)</span></code></td>
</tr>
<tr class="row-even"><td>Direct response</td>
<td><code class="docutils literal"><span class="pre">direct_response</span></code></td>
<td><code class="docutils literal"><span class="pre">d</span></code></td>
<td><code class="docutils literal"><span class="pre">x=d(s,z)</span></code></td>
</tr>
<tr class="row-odd"><td>Terminal conditions</td>
<td><code class="docutils literal"><span class="pre">terminal</span></code></td>
<td><code class="docutils literal"><span class="pre">f_T</span></code></td>
<td><code class="docutils literal"><span class="pre">0=f_T(s,x)</span></code></td>
</tr>
<tr class="row-even"><td>Explicit terminal conditions</td>
<td><code class="docutils literal"><span class="pre">direct_terminal</span></code></td>
<td><code class="docutils literal"><span class="pre">d_T</span></code></td>
<td><code class="docutils literal"><span class="pre">s=d_T(s)</span></code></td>
</tr>
</tbody>
</table>
<p>When present these functions can be accessed from the <code class="docutils literal"><span class="pre">model.functions</span></code> dictionary by using the standard name. For instance to compute the auxiliary variables at the steady-state one can compute:</p>
<div class="code python highlight-python3"><div class="highlight"><pre><span></span><span class="c1"># recover steady-state values</span>
<span class="n">s</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">calibration</span><span class="p">[</span><span class="s1">&#39;states&#39;</span><span class="p">]</span>
<span class="n">x</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">calibration</span><span class="p">[</span><span class="s1">&#39;controls&#39;</span><span class="p">]</span>
<span class="n">p</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">calibration</span><span class="p">[</span><span class="s1">&#39;parameters&#39;</span><span class="p">]</span>

<span class="c1"># compute the vector of auxiliary variables</span>
<span class="n">a</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">functions</span><span class="p">[</span><span class="s1">&#39;auxiliary&#39;</span><span class="p">]</span>
<span class="n">y</span> <span class="o">=</span> <span class="p">(</span><span class="n">s</span><span class="p">,</span><span class="n">x</span><span class="p">,</span><span class="n">p</span><span class="p">)</span>

<span class="c1"># it should correspond to the calibrated values:</span>
<span class="n">calib_y</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">calibration</span><span class="p">[</span><span class="s1">&#39;auxiliaries&#39;</span><span class="p">]</span>
<span class="k">assert</span><span class="p">(</span> <span class="nb">abs</span><span class="p">(</span><span class="n">y</span> <span class="o">-</span> <span class="n">calib_y</span><span class="p">)</span><span class="o">.</span><span class="n">max</span><span class="p">()</span> <span class="o">&lt;</span> <span class="mf">0.0000001</span> <span class="p">)</span>
</pre></div>
</div>
<div class="section" id="transitions">
<h4>Transitions<a class="headerlink" href="#transitions" title="Permalink to this headline">¶</a></h4>
<div class="highlight-python3"><div class="highlight"><pre><span></span>- name: `transition`
- short name: `g`
</pre></div>
</div>
<p>Transitions are given by a function <span class="math">\(g\)</span> such that at all times:</p>
<div class="math">
\[s_t = g(s_{t-1}, x_{t-1}, \epsilon_t)\]</div>
<p>where <span class="math">\(\epsilon_t\)</span> is a vector of i.i.d. shocks.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>In the RBC model, the vector of states is <span class="math">\(s_t=(a_t,k_t)\)</span>.
The transitions are:</p>
<blockquote>
<div><div class="math">
\[a_t = \rho a_{t-1} + \epsilon_t
k_t = (1-\delta)*k_{t-1} + i_{t-1}\]</div>
</div></blockquote>
<p>The yaml file is amended with:</p>
<div class="code yaml highlight-python3"><div class="highlight"><pre><span></span><span class="n">symbols</span><span class="p">:</span>
    <span class="n">states</span><span class="p">:</span> <span class="p">[</span><span class="n">a</span><span class="p">,</span><span class="n">k</span><span class="p">]</span>
    <span class="n">controls</span><span class="p">:</span> <span class="p">[</span><span class="n">i</span><span class="p">]</span>
    <span class="n">shocks</span><span class="p">:</span> <span class="p">[</span><span class="n">epsilon</span><span class="p">]</span>
    <span class="o">...</span>
<span class="n">equations</span><span class="p">:</span>
    <span class="n">transition</span><span class="p">:</span>
        <span class="n">a</span> <span class="o">=</span> <span class="n">rho</span><span class="o">*</span><span class="n">a</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span> <span class="o">+</span> <span class="n">e</span>
        <span class="n">k</span> <span class="o">=</span> <span class="n">k</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span><span class="o">*</span><span class="p">(</span><span class="mi">1</span><span class="o">-</span><span class="n">delta</span><span class="p">)</span> <span class="o">+</span> <span class="n">i</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span>
</pre></div>
</div>
<p class="last">Note that the transitions are given in the declaration order.</p>
</div>
</div>
<div class="section" id="auxiliary-variables">
<h4>Auxiliary variables<a class="headerlink" href="#auxiliary-variables" title="Permalink to this headline">¶</a></h4>
<div class="highlight-python3"><div class="highlight"><pre><span></span>- name: `auxiliary`
- short name: `a`
</pre></div>
</div>
<p>In order to reduce the number of variables, it is useful to define
auxiliary variables <span class="math">\(y_t\)</span> using a function <span class="math">\(a\)</span> such that:</p>
<div class="math">
\[y_t = a(s_t, x_t)\]</div>
<p>When they appear in an equation they are automatically substituted by
the corresponding expression in <span class="math">\(s_t\)</span> and <span class="math">\(x_t\)</span>.
Note that auxiliary variables are not explicitely listed in the following definition. Implicitly, wherever states and controls are allowed with the same date in an equation type, then auxiliary variable are also allowed with the same date.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">In the RBC model, three auxiliary variables are defined <span class="math">\(y_t, c_t, r_{k,t}\)</span> and <span class="math">\(w_t\)</span>. They are a closed form function of <span class="math">\(a_t, k_t, i_t, n_t\)</span>. Defining these variables speeds up computation since they are don&#8217;t need to be solved for or interpolated.</p>
</div>
</div>
<div class="section" id="utility-function-and-bellman-equation">
<h4>Utility function and Bellman equation<a class="headerlink" href="#utility-function-and-bellman-equation" title="Permalink to this headline">¶</a></h4>
<div class="highlight-python3"><div class="highlight"><pre><span></span>- name: `utility`
- short name: `u`
</pre></div>
</div>
<p>The (separable) value equation defines the value <span class="math">\(v_t\)</span> of a given policy as:</p>
<div class="math">
\[v_t = u(s_t,x_t) + \beta E_t \left[ v_{t+1} \right]\]</div>
<p>This gives rise to the Bellman eqution:</p>
<blockquote>
<div><div class="math">
\[v_t = \max_{x_t} \left( u(s_t,x_t) + \beta E_t \left[ v_{t+1} \right] \right)\]</div>
</div></blockquote>
<p>These two equations are characterized by the reward function <span class="math">\(u\)</span> and the discount rate <span class="math">\(\beta\)</span>. Function <span class="math">\(u\)</span> defines the vector of symbols <code class="docutils literal"><span class="pre">rewards</span></code>.
Since the definition of <span class="math">\(u\)</span> alone is not sufficient, the parameter used for the discount factor must be given to routines that compute the value. Several values can be computed at once, if <span class="math">\(U\)</span> is a vector function and <span class="math">\(\beta\)</span> a vector of discount factors, but in that case in cannot be used to solve for the Bellman equation.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>Our RBC example defines the value as <span class="math">\(v_t = \frac{(c_t)^{1-\gamma}}{1-\gamma} + \beta E_t v_{t+1}\)</span>. This information is coded using:   ## TODO add labour to utility</p>
<div class="code yaml last highlight-python3"><div class="highlight"><pre><span></span><span class="n">symbols</span><span class="p">:</span>
    <span class="o">...</span>
    <span class="n">rewards</span><span class="p">:</span> <span class="p">[</span><span class="n">r</span><span class="p">]</span>

<span class="n">equations</span><span class="p">:</span>
    <span class="o">...</span>
    <span class="n">utility</span><span class="p">:</span>
        <span class="o">-</span> <span class="n">r</span> <span class="o">=</span> <span class="n">c</span><span class="o">^</span><span class="p">(</span><span class="mi">1</span><span class="o">-</span><span class="n">gamma</span><span class="p">)</span><span class="o">/</span><span class="p">(</span><span class="mi">1</span><span class="o">-</span><span class="n">gamma</span><span class="p">)</span>

<span class="n">calibration</span><span class="p">:</span>
    <span class="o">...</span>
    <span class="n">beta</span><span class="p">:</span> <span class="mf">0.96</span>   <span class="c1"># beta is the default name of the discount</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="value">
<h4>Value<a class="headerlink" href="#value" title="Permalink to this headline">¶</a></h4>
<div class="highlight-python3"><div class="highlight"><pre><span></span>- name: `value`
- short name: `w`
</pre></div>
</div>
<p>A more general updating equation can be useful to express non-separable utilities or prices.  the vector of (generalized) values <span class="math">\(v^{*}\)</span> are defined by a function <code class="docutils literal"><span class="pre">w</span></code> such that:</p>
<div class="math">
\[v_t = w(s_t,x_t,v_t,s_{t+1},x_{t+1},v_{t+1})\]</div>
<p>As in the separable case, this function can either be used to compute the value of a given policy <span class="math">\(x=\varphi()\)</span> or in order solve the generalized Bellman equation:</p>
<div class="math">
\[v_t = \max_{x_t} \left( w(s_t,x_t,v_t,s_{t+1},x_{t+1},v_{t+1}) \right)\]</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>Instead of defining the rewards of the RBC example, one can instead define a value updating equation instead:</p>
<div class="code yaml last highlight-python3"><div class="highlight"><pre><span></span><span class="n">symbols</span><span class="p">:</span>
    <span class="o">...</span>
    <span class="n">values</span><span class="p">:</span> <span class="p">[</span><span class="n">v</span><span class="p">]</span>

<span class="n">equations</span><span class="p">:</span>
    <span class="o">...</span>
    <span class="n">value</span><span class="p">:</span>
        <span class="o">-</span> <span class="n">v</span> <span class="o">=</span> <span class="n">c</span><span class="o">^</span><span class="p">(</span><span class="mi">1</span><span class="o">-</span><span class="n">gamma</span><span class="p">)</span><span class="o">/</span><span class="p">(</span><span class="mi">1</span><span class="o">-</span><span class="n">gamma</span><span class="p">)</span><span class="o">*</span><span class="p">(</span><span class="mi">1</span><span class="o">-</span><span class="n">n</span><span class="o">...</span><span class="p">)</span> <span class="o">+</span> <span class="n">beta</span><span class="o">*</span><span class="n">v</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="boundaries">
<h4>Boundaries<a class="headerlink" href="#boundaries" title="Permalink to this headline">¶</a></h4>
<div class="highlight-python3"><div class="highlight"><pre><span></span>- name: `controls_lb` and `controls_ub`
- short name: `lb` and `ub`
</pre></div>
</div>
<p>The optimal controls must also satisfy bounds that are function of states. There are two functions <span class="math">\(\underline{b}()\)</span> and <span class="math">\(\overline{b}()\)</span> such that:</p>
<div class="math">
\[\underline{b}(s_t) \leq x_t \leq \overline{b}(s_t)\]</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>In our formulation of the RBC model we have excluded negative investment, implying <span class="math">\(i_t \geq 0\)</span>. On the other hand, labour cannot be negative so that we add lower bounds to the model:</p>
<div class="code yaml highlight-python3"><div class="highlight"><pre><span></span><span class="n">equations</span><span class="p">:</span>
    <span class="o">...</span>
    <span class="n">controls_lb</span><span class="p">:</span>
        <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="n">n</span> <span class="o">=</span> <span class="mi">0</span>
</pre></div>
</div>
<p class="last">Specifying the lower bound on labour actually has no effect since agents endogeneously choose to work a positive amount of time in order to produce some consumption goods.
As for upper bounds, it is not necessary to impose some: the maximum amount of investment is limited by the Inada conditions on consumption. As for labour <code class="docutils literal"><span class="pre">n</span></code>, it can be arbitrarly large without creating any paradox. Thus the upper bounds are omitted (and internally treated as infinite values).</p>
</div>
</div>
<div class="section" id="euler-equation">
<h4>Euler equation<a class="headerlink" href="#euler-equation" title="Permalink to this headline">¶</a></h4>
<div class="highlight-python3"><div class="highlight"><pre><span></span>- name: `arbitrage` (`equilibrium`)
- short name: `f`
</pre></div>
</div>
<p>A general formulation of the Euler equation is:</p>
<div class="math">
\[0 = E_t \left[ f(s_t, x_t, s_{t+1}, x_{t+1}) \right]\]</div>
<p>Note that the Euler equation and the boundaries interact via
&#8220;complentarity equations&#8221;. Evaluated at one given state, with
the vector of controls <span class="math">\(x=(x_1, ..., x_i, ..., x_{n_x})\)</span>, the
Euler equation gives us the residuals <span class="math">\(r=(f_1, ..., f_i, ...,
f_{n_x})\)</span>.
Suppose that the <span class="math">\(i\)</span>-th control <span class="math">\(x_i\)</span> is supposed to lie in the
interval
<span class="math">\([ \underline{b}_i, \overline{b}_i ]\)</span>. Then one of the following
conditions
must be true:</p>
<ul class="simple">
<li><span class="math">\(f_i\)</span> = 0</li>
<li><span class="math">\(f_i&lt;0\)</span> and <span class="math">\(x_i=\overline{b}_i\)</span></li>
<li><span class="math">\(f_i&gt;0\)</span> and <span class="math">\(x_i=\underline{b}_i\)</span></li>
</ul>
<p>By definition, this set of conditions is denoted by:</p>
<ul class="simple">
<li><span class="math">\(f_i = 0 \perp \underline{b}_i \leq x_i \leq \overline{b}_i\)</span></li>
</ul>
<p>These notations extend to a vector setting so that the Euler
equations can also be written:</p>
<div class="math">
\[0 = E_t \left[ f(s_t, x_t, s_{t+1}, x_{t+1}) \right] \perp \underline{b}(s_t) \leq x_t \leq \overline{b}(s_t)\]</div>
<p>Specifying the boundaries together with Euler equation, or providing them separately is exactly equivalent. In any case, when the boundaries are finite and occasionally binding, some attention should be devoted to write the Euler equations in a consistent manner. In particular, note that the Euler equations are order-sensitive.</p>
<p>The Euler conditions, together with the complementarity conditions typically often come from Kuhn-Tucker conditions associated with the Bellman problem, but that is not true in general.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>The RBC model has two Euler equations associated with investment and labour supply respectively. They are added to the model as:</p>
<div class="code yaml highlight-python3"><div class="highlight"><pre><span></span><span class="n">arbitrage</span><span class="p">:</span>
    <span class="o">-</span> <span class="mi">1</span> <span class="o">-</span> <span class="n">beta</span><span class="o">*</span><span class="p">(</span><span class="n">c</span><span class="o">/</span><span class="n">c</span><span class="p">(</span><span class="mi">1</span><span class="p">))</span><span class="o">^</span><span class="p">(</span><span class="n">sigma</span><span class="p">)</span><span class="o">*</span><span class="p">(</span><span class="mi">1</span><span class="o">-</span><span class="n">delta</span><span class="o">+</span><span class="n">rk</span><span class="p">(</span><span class="mi">1</span><span class="p">))</span>   <span class="o">|</span> <span class="mi">0</span> <span class="o">&lt;=</span> <span class="n">i</span> <span class="o">&lt;=</span> <span class="n">inf</span>
    <span class="o">-</span> <span class="n">w</span> <span class="o">-</span> <span class="n">chi</span><span class="o">*</span><span class="n">n</span><span class="o">^</span><span class="n">eta</span><span class="o">*</span><span class="n">c</span><span class="o">^</span><span class="n">sigma</span>                       <span class="o">|</span> <span class="mi">0</span> <span class="o">&lt;=</span> <span class="n">n</span> <span class="o">&lt;=</span> <span class="n">inf</span>
</pre></div>
</div>
<p class="last">Putting the complementarity conditions close to the Euler equations, instead of entering them as separate equations, helps to check the sign of the Euler residuals when constraints are binding. Here, when investment is less desirable, the first expression becomes bigger. When the representative is prevented to invest less due to the constraint (i.e. <span class="math">\(i_t=0\)</span>), the expression is then <em>positive</em> consistently with the complementarity conventions.</p>
</div>
</div>
<div class="section" id="expectations">
<h4>Expectations<a class="headerlink" href="#expectations" title="Permalink to this headline">¶</a></h4>
<div class="highlight-python3"><div class="highlight"><pre><span></span>- name: `expectation`
- short name: `h`
</pre></div>
</div>
<p>The vector of explicit expectations <span class="math">\(z_t\)</span> is defined by a function  <span class="math">\(h\)</span> such that:</p>
<div class="math">
\[z_t = E_t \left[ h(s_{t+1},x_{t+1}) \right]\]</div>
<div class="code highlight-python3"><div class="highlight"><pre><span></span><span class="n">In</span> <span class="n">the</span> <span class="n">RBC</span> <span class="n">example</span><span class="p">,</span> <span class="n">one</span> <span class="n">can</span> <span class="n">define</span><span class="o">.</span> <span class="n">the</span> <span class="n">expected</span> <span class="n">value</span> <span class="n">tomorrow</span> <span class="n">of</span> <span class="n">one</span> <span class="n">additional</span> <span class="n">unit</span> <span class="n">invested</span> <span class="n">tomorrow</span><span class="p">:</span>

<span class="o">..</span> <span class="n">math</span><span class="p">::</span>

    <span class="n">m_t</span><span class="o">=</span>\<span class="n">beta</span><span class="o">*</span><span class="p">(</span><span class="n">c_</span><span class="p">{</span><span class="n">t</span><span class="o">+</span><span class="mi">1</span><span class="p">}</span><span class="o">^</span><span class="p">(</span><span class="o">-</span>\<span class="n">sigma</span><span class="p">)</span><span class="o">*</span><span class="p">(</span><span class="mi">1</span><span class="o">-</span>\<span class="n">delta</span><span class="o">+</span><span class="n">r_</span><span class="p">{</span><span class="n">k</span><span class="p">,</span><span class="n">t</span><span class="o">+</span><span class="mi">1</span><span class="p">})</span>

 <span class="n">It</span> <span class="ow">is</span> <span class="n">a</span> <span class="n">pure</span> <span class="n">expectational</span> <span class="n">variable</span> <span class="ow">in</span> <span class="n">the</span> <span class="n">sense</span> <span class="n">that</span> <span class="n">it</span> <span class="ow">is</span> <span class="n">solely</span> <span class="n">determined</span> <span class="n">by</span> <span class="n">future</span> <span class="n">states</span> <span class="ow">and</span> <span class="n">decisions</span><span class="o">.</span> <span class="n">In</span> <span class="n">the</span> <span class="n">model</span> <span class="n">file</span><span class="p">,</span> <span class="n">it</span> <span class="n">would</span> <span class="n">be</span> <span class="n">defined</span> <span class="k">as</span><span class="p">:</span>

<span class="o">..</span> <span class="n">code</span><span class="p">:</span> <span class="n">yaml</span>

    <span class="n">symbols</span><span class="p">:</span>
        <span class="o">...</span>
        <span class="n">expectations</span><span class="p">:</span> <span class="p">[</span><span class="n">z</span><span class="p">]</span>

    <span class="n">equations</span><span class="p">:</span>
        <span class="o">...</span>
        <span class="o">-</span> <span class="n">z</span> <span class="o">=</span> <span class="n">beta</span><span class="o">*</span><span class="p">(</span><span class="n">c</span><span class="p">(</span><span class="mi">1</span><span class="p">))</span><span class="o">^</span><span class="p">(</span><span class="o">-</span><span class="n">sigma</span><span class="p">)</span><span class="o">*</span><span class="p">(</span><span class="mi">1</span><span class="o">-</span><span class="n">delta</span><span class="o">+</span><span class="n">rk</span><span class="p">(</span><span class="mi">1</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="section" id="generalized-expectations">
<h4>Generalized expectations<a class="headerlink" href="#generalized-expectations" title="Permalink to this headline">¶</a></h4>
<div class="highlight-python3"><div class="highlight"><pre><span></span>- name: `expectation_2`
- short name: `h_2`
</pre></div>
</div>
<p>The vector of generalized explicit expectations <span class="math">\(z_t\)</span> is defined by a function <span class="math">\(h^{\star}\)</span> such that:</p>
<div class="math">
\[z_t = E_t \left[ h^{\star}(s_t,x_t,\epsilon_{t+1},s_{t+1},x_{t+1}) \right]\]</div>
</div>
<div class="section" id="euler-equation-with-expectations">
<h4>Euler equation with expectations<a class="headerlink" href="#euler-equation-with-expectations" title="Permalink to this headline">¶</a></h4>
<div class="highlight-python3"><div class="highlight"><pre><span></span>- name: `arbitrage_2` (`equilibrium_2`)
- short name: `f_2`
</pre></div>
</div>
<p>If expectations are defined using one of the two preceding
definitions, the Euler equation can be rewritten as:</p>
<div class="math">
\[0 = f(s_t, x_t, z_t) \perp \underline{b}(s_t) \leq x_t \leq \overline{b}(s_t)\]</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>Given the definition of the expectation variable <span class="math">\(m_t\)</span>, today&#8217;s consumption is given by: <span class="math">\(c_t = z_t^(-\frac{1}{sigma})\)</span> so the Euler equations are rewritten as:</p>
<div class="code yaml highlight-python3"><div class="highlight"><pre><span></span><span class="n">arbitrage_2</span><span class="p">:</span>
    <span class="o">-</span> <span class="mi">1</span> <span class="o">-</span> <span class="n">beta</span><span class="o">*</span><span class="p">(</span><span class="n">c</span><span class="p">)</span><span class="o">^</span><span class="p">(</span><span class="n">sigma</span><span class="p">)</span><span class="o">/</span><span class="n">m</span>   <span class="o">|</span> <span class="mi">0</span> <span class="o">&lt;=</span> <span class="n">i</span> <span class="o">&lt;=</span> <span class="n">inf</span>
    <span class="o">-</span> <span class="n">w</span> <span class="o">-</span> <span class="n">chi</span><span class="o">*</span><span class="n">n</span><span class="o">^</span><span class="n">eta</span><span class="o">*</span><span class="n">c</span><span class="o">^</span><span class="n">sigma</span>    <span class="o">|</span> <span class="mi">0</span> <span class="o">&lt;=</span> <span class="n">n</span> <span class="o">&lt;=</span> <span class="n">inf</span>
</pre></div>
</div>
<p>Note the type of the arbitrage equation (<code class="docutils literal"><span class="pre">arbitrage_2</span></code> instead of <code class="docutils literal"><span class="pre">arbitrage</span></code>).</p>
<p>However <span class="math">\(c_t\)</span> is not a control itself,</p>
<blockquote>
<div>but the controls <span class="math">\(i_t, n_t\)</span> can be easily deduced:</div></blockquote>
<p>..math:</p>
<div class="highlight-python3"><div class="highlight"><pre><span></span><span class="n">n_t</span> <span class="o">=</span> <span class="p">((</span><span class="mi">1</span><span class="o">-</span><span class="n">alpha</span><span class="p">)</span><span class="o">*</span><span class="n">z_t</span><span class="o">*</span><span class="n">k_t</span><span class="o">^</span><span class="n">alpha</span><span class="o">*</span><span class="n">m_t</span><span class="o">/</span><span class="n">chi</span><span class="p">)</span><span class="o">^</span><span class="p">(</span><span class="mi">1</span><span class="o">/</span><span class="p">(</span><span class="n">eta</span><span class="o">+</span><span class="n">alpha</span><span class="p">))</span>
<span class="n">i_t</span> <span class="o">=</span> <span class="n">z_t</span><span class="o">*</span><span class="n">k_t</span><span class="o">^</span>\<span class="n">alpha</span><span class="o">*</span><span class="n">n_t</span><span class="o">^</span><span class="p">(</span><span class="mi">1</span><span class="o">-</span>\<span class="n">alpha</span><span class="p">)</span> <span class="o">-</span> <span class="p">(</span><span class="n">m_t</span><span class="p">)</span><span class="o">^</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="o">/</span><span class="n">sigma</span><span class="p">)</span>
</pre></div>
</div>
<p>This translates into the following YAML code:</p>
<div class="code yaml last highlight-python3"><div class="highlight"><pre><span></span><span class="n">equations</span><span class="p">:</span>
    <span class="o">-</span> <span class="n">n</span> <span class="o">=</span> <span class="p">((</span><span class="mi">1</span><span class="o">-</span><span class="n">alpha</span><span class="p">)</span><span class="o">*</span><span class="n">a</span><span class="o">*</span><span class="n">k</span><span class="o">^</span><span class="n">alpha</span><span class="o">*</span><span class="n">m</span><span class="o">/</span><span class="n">chi</span><span class="p">)</span><span class="o">^</span><span class="p">(</span><span class="mi">1</span><span class="o">/</span><span class="p">(</span><span class="n">eta</span><span class="o">+</span><span class="n">alpha</span><span class="p">))</span>
    <span class="o">-</span> <span class="n">i</span> <span class="o">=</span> <span class="n">z</span><span class="o">*</span><span class="n">k</span><span class="o">^</span><span class="n">alpha</span><span class="o">*</span><span class="n">n</span><span class="o">^</span><span class="p">(</span><span class="mi">1</span><span class="o">-</span><span class="n">alpha</span><span class="p">)</span> <span class="o">-</span> <span class="n">m</span><span class="o">^</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="o">/</span><span class="n">sigma</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="direct-response-function">
<h4>Direct response function<a class="headerlink" href="#direct-response-function" title="Permalink to this headline">¶</a></h4>
<div class="highlight-python3"><div class="highlight"><pre><span></span>- name: `direct_response`
- short name: `d`
</pre></div>
</div>
<p>In some simple cases, there a function <span class="math">\(d()\)</span> giving an explicit
definition of the controls:</p>
<div class="math">
\[x_t = d(s_t, z_t)\]</div>
<p>Compared to the preceding Euler equation, this formulation saves
computational time by removing the need to solve a nonlinear system to recover the controls implicitly defined by the Euler equation.</p>
</div>
<div class="section" id="terminal-conditions">
<h4>Terminal conditions<a class="headerlink" href="#terminal-conditions" title="Permalink to this headline">¶</a></h4>
<div class="highlight-python3"><div class="highlight"><pre><span></span>- name: `terminal_condition`
- short name: `f_T`
</pre></div>
</div>
<p>When solving a model over a finite number <span class="math">\(T\)</span> of periods, there must
be a terminal condition defining the controls for the last period.
This is a function <span class="math">\(f^T\)</span> such that:</p>
<div class="math">
\[0 = f^T(s_T, x_T)\]</div>
</div>
<div class="section" id="id1">
<h4>Terminal conditions<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h4>
<div class="highlight-python3"><div class="highlight"><pre><span></span>- name: `terminal_condition`
- short name: `f_T_2`
</pre></div>
</div>
<p>Sometimes the terminal condition is given as an explicity choicie for the controls in the last period. This defines function <span class="math">\(f^{T,\star}\)</span> such that:</p>
<div class="math">
\[x_T = f^{T,\star}(s_T)\]</div>
</div>
</div>
</div>
</div>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="algos.html" class="btn btn-neutral float-right" title="Solution algorithms" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="model_api.html" class="btn btn-neutral" title="Model API" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2012-2016, Pablo Winant.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'0.4.9.5',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>
      <script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

  

  
  
    <script type="text/javascript" src="_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>